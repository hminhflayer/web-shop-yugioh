@model IEnumerable<WebShop.Models.Bill>

@{
    ViewData["Title"] = "Index";
}

<h1 class="text-center">Quản lý đơn hàng</h1>
<div class="row mb-3">
    <div class="col-sm text-end">
        <form asp-action="Index" method="get">
            <div class="form-actions no-color">
                <input type="text" name="SearchString" placeholder="Tìm kiếm" asp-route-searchString="" />
                <input type="submit" value="Tìm kiếm" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>
<table class="table">
    <thead>
        <tr class="bg-info text-center">
            <th>
                @Html.DisplayNameFor(model => model.Date)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.TotalMoney)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Address)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.FullName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.PhoneNumber)
            </th>
            <th width="15%">
                @Html.DisplayNameFor(model => model.StatusBill)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.User)
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
@foreach (var item in Model) {
        <tr class="align-middle">
            <td>
                @Html.DisplayFor(modelItem => item.Date)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.TotalMoney)
            </td>
            
            @if(item.Address != null && item.Address.Length > 20)
            {
                <td>@item.Address.Substring(0, 18)...</td> 
            }
            else
            {
                <td>@item.Address</td>
            }

            <td>
                @Html.DisplayFor(modelItem => item.FullName)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.PhoneNumber)
            </td>
            <td class="text-center">
                @switch (item.StatusBill)
                {
                    case Status.CONFIRM:
                        {
                            <a style="width:90%" class="btn btn-secondary font-weight-bold text-light">Chờ xác nhận </a>
                            break;
                        }
                    case Status.SEND:
                        {
                            <a style="width:90%" class="btn btn-info font-weight-bold text-light">Đã gửi</a>
                            break;
                        }
                    case Status.TRANSPORT:
                        {
                            <a style="width:90%" class="btn btn-warning font-weight-bold text-light">Đang vận chuyển</a>
                            break;
                        }
                    case Status.CANCEL:
                        {
                            <a style="width:90%" class="btn btn-danger font-weight-bold text-light">Đã hủy</a>
                            break;
                        }
                    default:
                        {
                            <a class="btn btn-success font-weight-bold text-light">Đã nhận</a>
                            break;
                        }
                }

            </td>
            <td>
                @Html.DisplayFor(modelItem => item.User.Email)
            </td>
            <td>
                <a class="btn btn-success" asp-action="Edit" asp-route-id="@item.BillId">Cập nhật</a>
                <a class="btn btn-primary" asp-action="Details" asp-route-id="@item.BillId">Chi tiết</a>
            </td>
        </tr>
}
    </tbody>
</table>
